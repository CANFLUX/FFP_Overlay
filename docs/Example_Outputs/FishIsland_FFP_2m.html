<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Add a polygon to a map using a GeoJSON source</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<!-- Import Turf Module - Needed to calculate bounding boxes -->
<script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>
<style>
	body { margin: 0; padding: 0;}
	#map { position: absolute; top: 0; bottom: 0; width: 100%;}
	#map canvas {cursor: crosshair;}
  
    .action_menu {
        text-align: center;
        background: #fff;
        position: absolute;
        z-index: 1;
        bottom: 2%;
        right: 10px;
        border: #3887be;
        border-radius: 3px;
        display: flex;
        max-height: 10%;
        min-width: 75px;
        max-width: 100%;
        border: 1px solid rgba(0, 0, 0, 0.4);
        font-family: 'Open Sans', sans-serif; 
        }

    .btn {
        font: bold 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        background-color: #3386c0;
        color: #fff;
        position: relative;
        z-index: 1;
        border-width: 1px;
        display: block;
        cursor: pointer;
        padding: 8px;
        border-color: black;
        width: 100%;
        /* min-width: 5%; */
    }
    .btn:hover {
        background-color: #4ea0da;
    }
    .btn:first-child{
        margin-left: 0;
    }    
    
    .mapboxgl-popup {
        padding: 1%;
        max-width: 50%;
        min-width: 15%;
        font-size:2em;
        line-height:1.25em;
        }

    #layer_menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        left: 10px;
        border-radius: 3px;
        max-width: 10%;
        min-width: 5%;
        border: 1px solid rgba(0, 0, 0, 0.4);
        font-family: 'Open Sans', sans-serif;
        }
              
    nav a {
        font-size: 13px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 8px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.25);
        text-align: center;
        }
        
    nav a:last-child {
        border: none;
        }
        
    nav a:hover {
        background-color: #03dbfc;
        color: #404040;
        }
        
    nav a.active {
        background-color: #3887be;
        color: #ffffff;
        }
        
    nav a.active:hover {
        background: #3074a4;
        color: #ffffff;
        }
</style>
</head>

<body>
<nav id="layer_menu"></nav>
<div id="map"></div>
<div class="action_menu"> 
    <button id="readme" class="btn">FFP ReadMe</button>
</div>

<button id="zoomto" class="btn-control">Zoom to Footprint</button>
<!-- <div id="map"></div> -->
<script>
    
    document.getElementById('readme').addEventListener('click', () => {
            window.open('https://github.com/June-Skeeter/FFP_Overlay');
        });

    const FFP_Contour_Intervals = ['Climatology',];

	// Replace access token!
    mapboxgl.accessToken = 'pk.eyJ1IjoidWJjbWljcm9tZXQiLCJhIjoiY2xmMnJzYzlnMGFsYTNxcW1kYWhubjBiaSJ9.rhIOVatxQoS4M__qIFv6Pg';
  
    //  Custom mapStyle lest us use ESRI raster tiles
    const mapStyle = {
        version: 8,
        sources: {
        worldImagery: {
            type: "raster",
            tiles: ["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],
            tileSize: 256
            }
        },
        layers: [{
            id: "worldImagery",
            type: "raster",
            source: "worldImagery",
            minzoom: 0,
            maxzoom: 22
            }
        ]
    };

    //  Create the map - zoom and center are "arbitrary"
    const map = new mapboxgl.Map({
                container: 'map',
                zoom: 10,
                center: [-134.881089, 69.372278], // starting position
                style: mapStyle,
                });

    //  Locate the user
    var geolocate = new mapboxgl.GeolocateControl({
        positionOptions: {
        enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true},);

    map.addControl(geolocate);
    map.addControl(new mapboxgl.NavigationControl());  

    var Climatology = {"type": "FeatureCollection", "features": [{"id": "2", "type": "Feature", "properties": {"r": 0.8999999761581421, "Interval": "Climatology", "BandID": 2, "n_Obs": 1966, "Area": 73294.04581573381, "info": "<h3>Climatology</h3><br>90 % FFP Contour<br>7329405 m<sup>2</sup>"}, "geometry": {"type": "Polygon", "coordinates": [[[-134.88082595314748, 69.37364092370312], [-134.88082118664536, 69.3736408615198], [-134.88081643365214, 69.37364072062196], [-134.88081170461965, 69.3736405013194], [-134.8808070099472, 69.37364020409439], [-134.8808023599583, 69.3736398296005], [-134.88079776487794, 69.37363937866124], [-134.88079323481065, 69.37363885226823], [-134.880788779718, 69.37363825157897], [-134.88078440939648, 69.37363757791435], [-134.88078013345654, 69.37363683275582], [-134.88077596130097, 69.37363601774192], [-134.88077190210382, 69.37363513466482], [-134.88076796479126, 69.37363418546637], [-134.88076415802152, 69.3736331722339], [-134.88076049016547, 69.37363209719544], [-134.88075696928865, 69.37363096271501], [-134.88075524658367, 69.37363038091816], [-134.8805707629374, 69.37356508389301], [-134.88025627097335, 69.37353316951291], [-134.87920457959802, 69.37355009631084], [-134.87920232295917, 69.37355011494945], [-134.87919780955767, 69.373550116914], [-134.87919330035194, 69.37355004828595], [-134.8791888042203, 69.37354990920043], [-134.8791843300149, 69.37354969993127], [-134.87917988654468, 69.37354942089054], [-134.87917767359127, 69.37354926398734], [-134.8782697198082, 69.37347746127206], [-134.87685301810336, 69.37344077947945], [-134.87685076914008, 69.37344070350358], [-134.87684628299922, 69.3734405164208], [-134.8768418248426, 69.37344025929521], [-134.87683740346344, 69.37343993263397], [-134.87683302758236, 69.37343953708135], [-134.87682870583018, 69.37343907341754], [-134.87682444673084, 69.37343854255704], [-134.87682025868534, 69.37343794554694], [-134.87681818346792, 69.37343763064361], [-134.87625911438187, 69.37334755442168], [-134.87625676427598, 69.3733471497082], [-134.87625212616805, 69.37334629822982], [-134.8762476183158, 69.37334536382967], [-134.87624325263525, 69.37334434897775], [-134.8762390406663, 69.3733432563566], [-134.87623499354282, 69.37334208885449], [-134.8762311219628, 69.37334084955754], [-134.87622743616018, 69.37333954174161], [-134.87622564095267, 69.37333887112503], [-134.87576883455435, 69.37315918747082], [-134.87576714066392, 69.37315848570954], [-134.87576385734627, 69.37315705243945], [-134.87576078715043, 69.3731555616053], [-134.87575793818078, 69.3731540171424], [-134.87575531795744, 69.3731524231276], [-134.8757529333968, 69.3731507837685], [-134.87575079079323, 69.37314910339245], [-134.87574889580236, 69.373147386435], [-134.87574801087663, 69.37314651937177], [-134.87564688983264, 69.37303883252174], [-134.8756461022749, 69.37303791179268], [-134.87564466826277, 69.37303605677492], [-134.87564351831554, 69.37303417732389], [-134.87564265573923, 69.37303227884296], [-134.87564208301367, 69.37303036679016], [-134.8756418017853, 69.37302844666257], [-134.87564173419892, 69.37302748526915], [-134.87564318085612, 69.3727763858927], [-134.8756432478825, 69.37277550119084], [-134.87564350563042, 69.37277373402995], [-134.87564401030417, 69.37277197350326], [-134.87564476067493, 69.37277022389736], [-134.87564519709343, 69.37276935235909], [-134.87574796878366, 69.37259006849064], [-134.87574846491427, 69.37258929211563], [-134.87574955436753, 69.37258774788982], [-134.8757508370367, 69.37258622222426], [-134.87575231039636, 69.37258471812265], [-134.8757539715457, 69.37258323854634], [-134.87575581721404, 69.37258178640849], [-134.87575678574618, 69.37258106756009], [-134.87610569150556, 69.37233627034446], [-134.8761559154047, 69.37214575364813], [-134.87615621207877, 69.37214486787589], [-134.87615692994987, 69.37214310262695], [-134.87615789582517, 69.37214135214408], [-134.87615910731606, 69.37213962075612], [-134.8761605614265, 69.37213791274476], [-134.87616225456034, 69.372136232334], [-134.87616418253057, 69.37213458367935], [-134.87616634056917, 69.37213297085796], [-134.87616872333936, 69.37213139785833], [-134.87617132494853, 69.3721298685704], [-134.87617267969196, 69.37212911533413], [-134.87666912574005, 69.37186769455217], [-134.87671813206717, 69.37171498216877], [-134.8767184662911, 69.37171412589836], [-134.87671925134686, 69.37171242002937], [-134.87672026857146, 69.37171072947712], [-134.87672151560255, 69.3717090581677], [-134.87672298954394, 69.37170740998246], [-134.87672468697252, 69.37170578874921], [-134.87672660394617, 69.37170419823305], [-134.87672873601292, 69.37170264212776], [-134.87673107822116, 69.37170112404718], [-134.87673362513152, 69.37169964751689], [-134.87673637082904, 69.37169821596589], [-134.876739308937, 69.37169683271885], [-134.87674243263203, 69.37169550098822], [-134.87674573465978, 69.3716942238667], [-134.87674742932356, 69.37169359933712], [-134.876951306643, 69.37162200096066], [-134.87695306080397, 69.37162141355317], [-134.87695664634902, 69.37162026881013], [-134.8769603821983, 69.37161918547149], [-134.8769642599022, 69.37161816598753], [-134.87696827068999, 69.37161721266415], [-134.87697240548965, 69.37161632765768], [-134.87697665494898, 69.37161551296981], [-134.87698100945664, 69.37161477044323], [-134.87698321175552, 69.37161441744048], [-134.8773053037442, 69.37156601421401], [-134.87733964180697, 69.37154191976578], [-134.87734084825829, 69.3715411237901], [-134.87734337319085, 69.3715395542454], [-134.87734611884486, 69.37153803147284], [-134.87734907826797, 69.37153655932822], [-134.87735224396664, 69.37153514153911], [-134.87735560792532, 69.37153378169532], [-134.87735916162617, 69.37153248324013], [-134.87736289607093, 69.37153124946131], [-134.87736680180387, 69.37153008348278], [-134.87737086893526, 69.371528988257], [-134.87737508716683, 69.37152796655703], [-134.87737944581798, 69.37152702096989], [-134.87738393385237, 69.37152615388987], [-134.8773885399058, 69.37152536751249], [-134.8773932523156, 69.37152466382888], [-134.87739805914973, 69.37152404462077], [-134.87740294823692, 69.37152351145609], [-134.87740790719786, 69.37152306568478], [-134.8774129234763, 69.37152270843558], [-134.8774179843704, 69.3715224406131], [-134.87742307706563, 69.37152226289545], [-134.87742818866755, 69.37152217573262], [-134.87743074757933, 69.37152215483182], [-134.87749856983055, 69.37152220269681], [-134.8778789426575, 69.37142203047556], [-134.87788100975294, 69.37142151386615], [-134.87788521433495, 69.37142051758174], [-134.8778895543962, 69.37141959635623], [-134.87789401916885, 69.37141875247522], [-134.87789859757552, 69.37141798803243], [-134.87790327825704, 69.37141730492446], [-134.8779080496006, 69.37141670484611], [-134.87791289976795, 69.37141618928626], [-134.87791534306456, 69.37141595280906], [-134.8785260431307, 69.3713625739119], [-134.87852908796208, 69.37136234241397], [-134.87853521210013, 69.37136194556444], [-134.87854139364265, 69.3713616816276], [-134.87854760941073, 69.37136155159315], [-134.87855072294312, 69.37136152014392], [-134.87904146332755, 69.37136186271896], [-134.8795662424918, 69.37129498832988], [-134.88046885786596, 69.37101319717281], [-134.88047069536137, 69.37101265027289], [-134.8804744415994, 69.37101158770471], [-134.88047832606625, 69.37101058875237], [-134.8804823400811, 69.3710096556483], [-134.88048647467366, 69.37100879047766], [-134.880490720604, 69.37100799517403], [-134.88049506838348, 69.3710072715146], [-134.8804995082962, 69.3710066211166], [-134.88050403042, 69.3710060454335], [-134.88050862464885, 69.37100554575183], [-134.8805132807158, 69.37100512318823], [-134.88051798821596, 69.37100477868705], [-134.88052273662922, 69.3710045130181], [-134.8805275153439, 69.37100432677515], [-134.88053231368073, 69.37100422037439], [-134.88053712091693, 69.3710041940536], [-134.8805419263094, 69.37100424787154], [-134.88054671911928, 69.37100438170802], [-134.88054911103734, 69.37100446860464], [-134.8809559359296, 69.37102268376498], [-134.88095833424447, 69.3710228117008], [-134.88096311085008, 69.3710231077424], [-134.88096784199962, 69.37102348374175], [-134.8809725169351, 69.37102393884389], [-134.88097712502545, 69.3710244720139], [-134.88098165579177, 69.37102508203931], [-134.88098609893115, 69.37102576753296], [-134.88099044434003, 69.37102652693605], [-134.88099468213704, 69.37102735852172], [-134.88099880268516, 69.37102826039892], [-134.88100279661427, 69.37102923051673], [-134.88100665484245, 69.37103026666921], [-134.88101036859618, 69.37103136650015], [-134.88101392942997, 69.37103252750846], [-134.8810173292466, 69.37103374705404], [-134.88102056031497, 69.37103502236366], [-134.88102361528755, 69.37103635053725], [-134.88102648721735, 69.37103772855458], [-134.8810278765788, 69.37103842963938], [-134.8813321825561, 69.37120005959477], [-134.8813336538616, 69.3712008893273], [-134.8813364659438, 69.37120257585201], [-134.88133901297687, 69.37120431394575], [-134.8813412873789, 69.37120609843458], [-134.8813432823793, 69.37120792400648], [-134.88134499203943, 69.37120978522715], [-134.88134577484468, 69.37121072406325], [-134.8815477624375, 69.37147989814432], [-134.88154828136476, 69.37148065589825], [-134.8815492253488, 69.37148217864112], [-134.88154998078875, 69.37148371440884], [-134.88155054625759, 69.37148526030045], [-134.8815507813432, 69.37148603541323], [-134.88164923562084, 69.37189440594011], [-134.881718036896, 69.37196765443746], [-134.88330842508125, 69.37184982875463], [-134.88331103948838, 69.37184966006758], [-134.88331628972225, 69.37184937107264], [-134.88332157559978, 69.37184917916444], [-134.8833268826902, 69.37184908486698], [-134.88332953972994, 69.37184906216974], [-134.88409255179246, 69.37184957320244], [-134.88409504319674, 69.37184959639332], [-134.88410001979338, 69.37184968577465], [-134.88410497800047, 69.37184986099622], [-134.88410990591575, 69.37185012163745], [-134.88411479170992, 69.37185046707272], [-134.88411962365385, 69.37185089647272], [-134.8841243901482, 69.37185140880662], [-134.88412907975163, 69.37185200284463], [-134.88413368120652, 69.37185267716079], [-134.88413818346638, 69.37185343013628], [-134.88414257572362, 69.37185425996358], [-134.88414684743455, 69.37185516465068], [-134.88414895185278, 69.37185563544878], [-134.88430136204832, 69.37189160855854], [-134.88430340424205, 69.37189211662559], [-134.88430741538608, 69.37189316751609], [-134.8843112752896, 69.3718942866088], [-134.8843149746339, 69.37189547120201], [-134.8843185044879, 69.37189671843583], [-134.88432185632985, 69.37189802529922], [-134.8843250220676, 69.37189938863709], [-134.88432799405834, 69.37190080515808], [-134.88433076512695, 69.37190227144231], [-134.88433332858352, 69.37190378394995], [-134.88433567823918, 69.37190533902945], [-134.8843378084214, 69.37190693292654], [-134.88433971398737, 69.37190856179318], [-134.88434139033654, 69.37191022169692], [-134.88434283342184, 69.3719119086304], [-134.88434403975927, 69.37191361852099], [-134.88434500643635, 69.37191534724063], [-134.8843457311194, 69.37191709061581], [-134.88434621205863, 69.37191884443766], [-134.88434644809305, 69.37192060447204], [-134.88434650477578, 69.37192148551183], [-134.884346312585, 69.37195735686676], [-134.88434624888822, 69.3719582209168], [-134.8843460035081, 69.37195994693153], [-134.88434552257698, 69.37196166677376], [-134.88434480721162, 69.37196337644933], [-134.88434385907337, 69.37196507198774], [-134.8843426803641, 69.3719667494513], [-134.88434127382118, 69.37196840494425], [-134.8843396427111, 69.37197003462198], [-134.88433779082183, 69.37197163469968], [-134.88433572245418, 69.37197320146134], [-134.88433344241173, 69.37197473126831], [-134.88433095598944, 69.37197622056787], [-134.88432826896172, 69.3719776659013], [-134.88432538756894, 69.37197906391187], [-134.88432389908994, 69.37197975067349], [-134.88414229281864, 69.37205948259415], [-134.88414186250873, 69.37213965526327], [-134.8843152090749, 69.37220100729557], [-134.8843169272623, 69.37220164601692], [-134.8843202726811, 69.37220295241627], [-134.88432343226762, 69.37220431512029], [-134.8843263984102, 69.37220573084618], [-134.88432916396314, 69.37220719618337], [-134.88433172226385, 69.37220870760167], [-134.88433406714918, 69.37221026145998], [-134.8843361929701, 69.37221185401496], [-134.8843380946052, 69.37221348142995], [-134.88433976747334, 69.37221513978443], [-134.8843412075443, 69.37221682508331], [-134.88434241134885, 69.37221853326646], [-134.88434337598676, 69.3722202602188], [-134.88434409913418, 69.37222200177989], [-134.88434457904887, 69.37222375375426], [-134.88434481457463, 69.37222551192116], [-134.8843448711325, 69.37222639202395], [-134.88434476614867, 69.37224598609707], [-134.88471635747248, 69.3723610646966], [-134.88471812818713, 69.37236163980127], [-134.88472159046012, 69.37236281890594], [-134.88472489063182, 69.3723640544486], [-134.88472802131037, 69.37236534366183], [-134.8847309754834, 69.37236668365796], [-134.88473374653418, 69.37236807143567], [-134.88473632825597, 69.3723695038866], [-134.88473871486588, 69.37237097780215], [-134.8847409010183, 69.37237248988102], [-134.8847428818166, 69.3723740367364], [-134.8847446528241, 69.37237561490366], [-134.88474621007384, 69.37237722084782], [-134.88474755007786, 69.37237885097193], [-134.88474866983472, 69.37238050162468], [-134.88474956683623, 69.37238216910887], [-134.88475023907318, 69.37238384968961], [-134.88475068503988, 69.37238553960263], [-134.8847509037373, 69.37238723506282], [-134.88475095617562, 69.37238808370552], [-134.88475086715255, 69.37240475729324], [-134.88485803523955, 69.3724300508317], [-134.88486019068452, 69.37243058863113], [-134.88486441952116, 69.37243170294181], [-134.88486847866432, 69.37243289312265], [-134.88487235717648, 69.37243415596676], [-134.884876044607, 69.37243548807135], [-134.88487953101995, 69.37243688584707], [-134.88488280702117, 69.37243834552756], [-134.8848858637833, 69.3724398631797], [-134.88488869306988, 69.3724414347142], [-134.88489128725723, 69.3724430558965], [-134.88489252466212, 69.37244387836151], [-134.88499388017067, 69.37251568848434], [-134.8849949788122, 69.37251651946164], [-134.88499705422512, 69.37251820012519], [-134.8849988833453, 69.37251991598642], [-134.88500046139316, 69.37252166256184], [-134.88500178424525, 69.37252343528769], [-134.88500284844486, 69.37252522953179], [-134.88500365121118, 69.37252704060577], [-134.88500419044652, 69.37252886377736], [-134.88500446474183, 69.37253069428256], [-134.88500447338026, 69.3725325273383], [-134.88500441123904, 69.37253344390511], [-134.88495153464385, 69.37291005940806], [-134.88495133388176, 69.37291099400129], [-134.88495079415893, 69.37291285821392], [-134.88494997896433, 69.37291470994029], [-134.88494889052407, 69.37291654412358], [-134.8849475318104, 69.37291835575506], [-134.8849459065337, 69.37292013988748], [-134.88494401913215, 69.37292189164864], [-134.8849418747599, 69.37292360625484], [-134.88493947927284, 69.37292527902379], [-134.88493683921246, 69.37292690538743], [-134.88493396178828, 69.37292848090449], [-134.884930854858, 69.3729300012725], [-134.88492924503834, 69.37293074714049], [-134.8847366481129, 69.37301530231873], [-134.88458894492268, 69.37317055645521], [-134.88458814328726, 69.37317133845656], [-134.88458643807877, 69.37317288851915], [-134.88458453093696, 69.37317440905089], [-134.8845824259609, 69.37317589678355], [-134.88458012767484, 69.37317734851959], [-134.88457764101835, 69.37317876113885], [-134.88457497133595, 69.37318013160511], [-134.88457212436577, 69.37318145697276], [-134.88456910622665, 69.3731827343933], [-134.8845659234056, 69.373183961121], [-134.884564291658, 69.37318456147509], [-134.88436042482283, 69.3732561687784], [-134.8843586642575, 69.3732567583272], [-134.88435506534321, 69.37325790713405], [-134.88435131505, 69.37325899408519], [-134.8843474219216, 69.37326001670445], [-134.8843433948275, 69.373260972662], [-134.88433924294205, 69.37326185978002], [-134.88433497572396, 69.37326267603754], [-134.88433060289515, 69.37326341957483], [-134.88432613441762, 69.37326408869802], [-134.88432158047155, 69.37326468188272], [-134.88431695143154, 69.37326519777751], [-134.88431225784376, 69.3732656352071], [-134.88430751040136, 69.37326599317493], [-134.88430271991936, 69.37326627086546], [-134.88430031527724, 69.37326638955082], [-134.88347040464637, 69.37330025100408], [-134.88336562339205, 69.37333705352177], [-134.88331959216399, 69.37343329788419], [-134.88331908240247, 69.37343421674638], [-134.88331792757313, 69.37343604383996], [-134.88331650388892, 69.37343784719702], [-134.88331481522943, 69.37343962190327], [-134.8833128661962, 69.37344136312267], [-134.88331066210029, 69.37344306611038], [-134.88330820894782, 69.37344472622573], [-134.88330551342372, 69.37344633894476], [-134.8833025828734, 69.37344789987284], [-134.8832994252824, 69.37344940475641], [-134.88329604925522, 69.37345084949467], [-134.8832924639917, 69.37345223015059], [-134.8832886792617, 69.37345354296188], [-134.88328470537868, 69.3734547843511], [-134.8832826724711, 69.37345538675487], [-134.88302792740328, 69.37352695828862], [-134.88302597388056, 69.37352748050384], [-134.88302199774492, 69.37352849114569], [-134.88301788812595, 69.37352943307624], [-134.8830136545674, 69.37353030410802], [-134.88300930690136, 69.37353110221808], [-134.88300485522495, 69.37353182555296], [-134.88300030987665, 69.37353247243273], [-134.88299568141252, 69.3735330413551], [-134.8829909805818, 69.3735335309988], [-134.88298621830145, 69.37353394022672], [-134.88298140563137, 69.37353426808846], [-134.88297655374865, 69.37353451382256], [-134.8829716739212, 69.37353467685834], [-134.88296677748195, 69.3735347568172], [-134.88296432652922, 69.37353477599207], [-134.88278287920807, 69.37353465359952], [-134.8822428847121, 69.37362075164097], [-134.8822403841866, 69.37362112234148], [-134.88223533064533, 69.37362181622312], [-134.88223017938282, 69.37362241414728], [-134.88222494504566, 69.37362291441383], [-134.8822196425164, 69.3736233156004], [-134.88221428687137, 69.37362361656636], [-134.88220889333823, 69.37362381645595], [-134.8822034772521, 69.3736239147008], [-134.88220076549305, 69.37362393835902], [-134.88169503886468, 69.3736235945339], [-134.88083310688842, 69.37364087898207], [-134.8808307226776, 69.37364090703515], [-134.88082595314748, 69.37364092370312]]]}}, {"id": "1", "type": "Feature", "properties": {"r": 0.75, "Interval": "Climatology", "BandID": 2, "n_Obs": 1966, "Area": 13765.301581361557, "info": "<h3>Climatology</h3><br>75 % FFP Contour<br>1376530 m<sup>2</sup>"}, "geometry": {"type": "Polygon", "coordinates": [[[-134.88098156464275, 69.37285184786052], [-134.88097650339643, 69.37285175537953], [-134.8809739760419, 69.37285168690214], [-134.879448181791, 69.37279682705005], [-134.87944561515982, 69.37279671143297], [-134.87944050189188, 69.37279643433311], [-134.87943543520143, 69.37279606591973], [-134.87943042819768, 69.372795607146], [-134.879425493835, 69.3727950591989], [-134.8794206448797, 69.37279442349612], [-134.879418243337, 69.3727940838973], [-134.87906245698656, 69.37274002922825], [-134.87906035424973, 69.37273968956914], [-134.8790561947392, 69.37273897690181], [-134.87905213140692, 69.37273819830735], [-134.87904817265317, 69.37273735539536], [-134.87904432666178, 69.37273644990839], [-134.8790406013833, 69.3727354837183], [-134.87903700451895, 69.37273445882248], [-134.87903354350468, 69.37273337733973], [-134.8790302254954, 69.37273224150583], [-134.87902705735007, 69.37273105366874], [-134.8790240456182, 69.37272981628412], [-134.87902119652603, 69.37272853191001], [-134.8790198133975, 69.37272787830156], [-134.87876617088935, 69.37260215119181], [-134.87876470291425, 69.37260138220618], [-134.878761881605, 69.37259981852117], [-134.87875929319225, 69.37259820553133], [-134.87875694458953, 69.37259654754492], [-134.87875484206992, 69.37259484899043], [-134.87875299124929, 69.37259311440471], [-134.87875139707103, 69.37259134842088], [-134.8787500637932, 69.37258955575587], [-134.8787489949769, 69.3725877411979], [-134.8787481934768, 69.37258590959362], [-134.87874766143378, 69.37258406583526], [-134.87874740026874, 69.3725822148475], [-134.87874733753821, 69.3725812881635], [-134.87874814354052, 69.3724378027823], [-134.8787482058593, 69.37243695006433], [-134.87874844541315, 69.3724352466375], [-134.87874891439859, 69.37243354915297], [-134.87874961175478, 69.37243186145014], [-134.8787505359044, 69.37243018734635], [-134.8787516847571, 69.37242853062814], [-134.87875305571438, 69.37242689504272], [-134.87875464567517, 69.37242528428959], [-134.87875549498762, 69.37242448558027], [-134.87916445359969, 69.37206605580018], [-134.87916547448322, 69.37206522257115], [-134.87916763449434, 69.37206357539013], [-134.8791700280762, 69.3720619688477], [-134.87917264909882, 69.37206040705821], [-134.8791754908497, 69.37205889402138], [-134.87917854605132, 69.37205743361197], [-134.87918180687933, 69.37205602957006], [-134.87918526498285, 69.37205468549135], [-134.8791870422773, 69.37205402888294], [-134.8794928507224, 69.37194662693511], [-134.8794947199327, 69.37194600286688], [-134.87949854549998, 69.3719447888719], [-134.8795025403508, 69.37194364467074], [-134.87950669425456, 69.3719425731936], [-134.87951099657323, 69.37194157718454], [-134.87951543628859, 69.37194065919432], [-134.87952000203066, 69.37193982157386], [-134.87952468210688, 69.37193906646826], [-134.87952704924768, 69.37193870979924], [-134.88003612470158, 69.37186731930143], [-134.8800381591062, 69.371867051589], [-134.88004225846623, 69.37186654702255], [-134.8800464151648, 69.3718661046046], [-134.88005062162682, 69.37186572514145], [-134.88005487018685, 69.37186540932451], [-134.88005915310288, 69.37186515772932], [-134.88006130217786, 69.37186504805184], [-134.88044277930078, 69.37184850177657], [-134.8807783601033, 69.3717643320909], [-134.88078054097087, 69.3717638144812], [-134.880784975636, 69.37176281968125], [-134.88078955014151, 69.371761906995], [-134.880794252269, 69.37176107886019], [-134.88079906945896, 69.37176033748874], [-134.88080398884497, 69.37175968486086], [-134.88080899728755, 69.37175912271968], [-134.88081408140874, 69.37175865256675], [-134.88081922762908, 69.37175827565778], [-134.88082442220326, 69.37175799299952], [-134.88082965125645, 69.37175780534692], [-134.88083490082212, 69.37175771320118], [-134.88083752898262, 69.37175769105176], [-134.88099013073244, 69.3717577957167], [-134.88099262655106, 69.37175781903179], [-134.88099761193735, 69.37175790881429], [-134.88100257882425, 69.37175808474142], [-134.8810075152465, 69.37175834638931], [-134.88101240931184, 69.37175869312773], [-134.88101724922979, 69.3717591241213], [-134.8810220233407, 69.37175963833168], [-134.88102672014355, 69.37176023452015], [-134.8810313283234, 69.3717609112505], [-134.88103583677852, 69.37176166689233], [-134.88104023464786, 69.37176249962532], [-134.88104451133654, 69.37176340744327], [-134.8810486565417, 69.37176438815925], [-134.88105266027722, 69.37176543941061], [-134.88105651289766, 69.37176655866479], [-134.88106020512188, 69.37176774322545], [-134.88106200999832, 69.37176835148531], [-134.88121431573398, 69.37182226298025], [-134.8812159818035, 69.37182288145634], [-134.8812192286612, 69.37182414563965], [-134.88122230138046, 69.37182546282462], [-134.88122519301118, 69.37182683003199], [-134.88122789701293, 69.37182824416931], [-134.8812304072698, 69.37182970203816], [-134.88123271810394, 69.37183120034103], [-134.8812348242885, 69.371832735689], [-134.88123582559365, 69.37183351219515], [-134.88138773800932, 69.37195916623969], [-134.88138865955548, 69.37195998347529], [-134.88139038792394, 69.37196163289198], [-134.88139188490464, 69.37196331019885], [-134.8813931468983, 69.37196501136309], [-134.88139417087052, 69.37196673229448], [-134.8813949543593, 69.3719684688553], [-134.8813952857111, 69.3719693405232], [-134.88143538646975, 69.37209887945262], [-134.8823108213649, 69.37209947504226], [-134.8823133172245, 69.37209949833839], [-134.88231830269524, 69.37209958808297], [-134.88232326967153, 69.37209976397232], [-134.88232820618796, 69.37210002558268], [-134.88233310035199, 69.37210037228385], [-134.88233794037296, 69.37210080324057], [-134.8823427145909, 69.37210131741465], [-134.88234741150458, 69.37210191356739], [-134.8823520197988, 69.37210259026266], [-134.88235652837153, 69.37210334587019], [-134.88236092636143, 69.37210417856969], [-134.8823652031734, 69.37210508635509], [-134.88236934850417, 69.37210606703951], [-134.88237335236738, 69.37210711826039], [-134.8823772051173, 69.37210823748522], [-134.88238089747247, 69.37210942201777], [-134.88238442053765, 69.3721106690044], [-134.88238776582537, 69.37211197544096], [-134.88239092527652, 69.37211333818013], [-134.88239389127983, 69.37211475393906], [-134.88239665668996, 69.37211621930702], [-134.88239921484453, 69.37211773075383], [-134.88240155958087, 69.37211928463825], [-134.8824036852502, 69.37212087721686], [-134.8824055867316, 69.37212250465302], [-134.8824072594442, 69.37212416302613], [-134.88240869935825, 69.37212584834101], [-134.88240990300474, 69.3721275565376], [-134.88241086748403, 69.37212928350063], [-134.88241159047243, 69.3721310250698], [-134.88241207022827, 69.37213277704952], [-134.88241230559564, 69.37213453521905], [-134.88241236207446, 69.37213541532243], [-134.88241203980502, 69.3721945750348], [-134.8825927849538, 69.372274550354], [-134.882594398466, 69.37227530418848], [-134.8825975107153, 69.37227684075805], [-134.88260038925887, 69.37227843295872], [-134.88260302611573, 69.3722800763761], [-134.8826054139748, 69.37228176645357], [-134.88260754621538, 69.37228349850515], [-134.8826085476473, 69.37228437443109], [-134.88276037381007, 69.37242796294451], [-134.8827611225406, 69.37242872266795], [-134.88276252265044, 69.3724302531861], [-134.88276372674778, 69.37243180429687], [-134.88276473241135, 69.37243337288113], [-134.88276553761878, 69.37243495578474], [-134.88276614075096, 69.37243654982471], [-134.88276654059496, 69.37243815179563], [-134.88276673634678, 69.37243975847619], [-134.88276678312477, 69.37244056259041], [-134.88276639348155, 69.37251230529175], [-134.88276633430013, 69.37251313654023], [-134.88276610673142, 69.37251479717679], [-134.88276566111273, 69.37251645230982], [-134.88276499840177, 69.37251809838205], [-134.88276412002287, 69.37251973185546], [-134.88276302786383, 69.3725213492193], [-134.88276172427206, 69.37252294699734], [-134.8827602120493, 69.3725245217554], [-134.88275849444574, 69.37252607010895], [-134.88275657515305, 69.37252758872995], [-134.8827555655732, 69.3725283401951], [-134.88255130857758, 69.37267168807972], [-134.88255006511412, 69.37267250714275], [-134.88254745956826, 69.37267412146842], [-134.88254462043923, 69.37267568605981], [-134.88254155534426, 69.37267719671915], [-134.88253827250676, 69.37267864939346], [-134.8825347807346, 69.37268004018517], [-134.88253108939608, 69.37268136536285], [-134.88252720839466, 69.37268262137117], [-134.88252314814287, 69.37268380484026], [-134.88251891953456, 69.37268491259485], [-134.88251453391484, 69.37268594166291], [-134.88251000305, 69.3726868892835], [-134.88250533909618, 69.3726877529142], [-134.8825005545667, 69.37268853023787], [-134.88249566229834, 69.372689219169], [-134.88249067541682, 69.37268981785921], [-134.88248815998043, 69.372690094428], [-134.88216480311715, 69.37272243177478], [-134.8820323895249, 69.37278443142046], [-134.8820307362482, 69.3727851648508], [-134.88202732333028, 69.37278660027307], [-134.88202370248445, 69.3727879709033], [-134.8820198835899, 69.37278927300174], [-134.88201587706635, 69.37279050301575], [-134.88201169384516, 69.37279165758933], [-134.88200734533999, 69.37279273357224], [-134.8820028434156, 69.37279372802873], [-134.88199820035516, 69.37279463824547], [-134.88199342882697, 69.372795461739], [-134.88199101255253, 69.37279585150908], [-134.88163462960955, 69.37284941615485], [-134.88163223668852, 69.37284975084334], [-134.88162740588743, 69.37285037710924], [-134.88162249141214, 69.37285091640625], [-134.88161750584865, 69.3728513673532], [-134.88161246196486, 69.37285172879527], [-134.88160737267808, 69.37285199980678], [-134.8816022510218, 69.37285217969368], [-134.88159711011278, 69.37285226799527], [-134.88159453648885, 69.37285228920679], [-134.88098409853444, 69.37285187186409], [-134.88098156464275, 69.37285184786052]]]}}, {"id": "0", "type": "Feature", "properties": {"r": 0.5, "Interval": "Climatology", "BandID": 2, "n_Obs": 1966, "Area": 3265.1893045961197, "info": "<h3>Climatology</h3><br>50 % FFP Contour<br>326519 m<sup>2</sup>"}, "geometry": {"type": "Polygon", "coordinates": [[[-134.8813286944937, 69.37256257021207], [-134.88132642672522, 69.37256286643411], [-134.88132185382045, 69.37256342054098], [-134.8813172113903, 69.37256389739068], [-134.88131250992777, 69.37256429590533], [-134.8813077600592, 69.37256461518427], [-134.8813029725197, 69.37256485450587], [-134.88129815812997, 69.37256501332924], [-134.881293327772, 69.37256509129539], [-134.8812884923631, 69.37256508822804], [-134.88128366283206, 69.37256500413422], [-134.8812812509021, 69.37256494184297], [-134.88021319779747, 69.3725283368118], [-134.8802107074699, 69.37252822953741], [-134.88020574484435, 69.37252797182697], [-134.88020082429188, 69.37252762815928], [-134.88019595778178, 69.37252719937028], [-134.88019115715124, 69.37252668650297], [-134.8801864340776, 69.37252609080487], [-134.8801818000493, 69.372525413725], [-134.88017726633828, 69.37252465691024], [-134.88017284397253, 69.37252382220159], [-134.880168543709, 69.37252291162932], [-134.88016437600797, 69.37252192740839], [-134.8801603510068, 69.37252087193282], [-134.88015647849596, 69.37251974776994], [-134.88015276789537, 69.37251855765432], [-134.88014922823064, 69.37251730448072], [-134.88014586811158, 69.37251599129745], [-134.8801426957115, 69.37251462129869], [-134.88013971874696, 69.37251319781686], [-134.88013828005901, 69.37251247313013], [-134.87993540253277, 69.37240471850689], [-134.87993413173953, 69.37240400797812], [-134.87993168590125, 69.37240256672074], [-134.8799294341365, 69.37240108666647], [-134.8799273813843, 69.37239957106172], [-134.87992553214733, 69.37239802323087], [-134.87992389048173, 69.37239644656914], [-134.87992245998845, 69.37239484453484], [-134.87992124380514, 69.37239322064194], [-134.87992024459942, 69.37239157845246], [-134.87991946456296, 69.37238992156843], [-134.87991890540667, 69.37238825362414], [-134.879918568357, 69.37238657827822], [-134.8799184541532, 69.37238489920544], [-134.87991856304575, 69.37238322008884], [-134.8799188947957, 69.37238154461143], [-134.87991944867537, 69.37237987644829], [-134.87992022346972, 69.37237821925852], [-134.8799212174793, 69.3723765766771], [-134.8799224285237, 69.37237495230693], [-134.87992385394654, 69.372373349711], [-134.87992461989086, 69.37237255429923], [-134.880129190298, 69.37217540247849], [-134.8801301799576, 69.37217452154444], [-134.88013228984082, 69.37217277933354], [-134.8801346577257, 69.372171078841], [-134.88013727700368, 69.37216942481274], [-134.88014014036446, 69.37216782186495], [-134.8801432398167, 69.37216627447135], [-134.88014656671012, 69.37216478695049], [-134.88015011175952, 69.37216336345399], [-134.88015386507098, 69.37216200795466], [-134.88015781616943, 69.37216072423554], [-134.88016195402773, 69.37215951587935], [-134.8801662670973, 69.37215838625856], [-134.88016846595968, 69.37215784154009], [-134.88047407236718, 69.37208630921413], [-134.8804761743066, 69.37208584287227], [-134.88048044023225, 69.3720849469161], [-134.88048482509348, 69.37208412543902], [-134.8804893184392, 69.37208338039895], [-134.88049390955953, 69.3720827135717], [-134.88049858751157, 69.37208212654669], [-134.88050334114556, 69.37208162072305], [-134.8805081591312, 69.3720811973064], [-134.8805105827852, 69.37208100633829], [-134.88101946062454, 69.3720454843083], [-134.88102197570313, 69.37204533175019], [-134.88102702439517, 69.37204507130218], [-134.88103210378006, 69.37204490046209], [-134.8810372010734, 69.37204481965999], [-134.8810423034454, 69.37204482909918], [-134.88104739805343, 69.37204492875597], [-134.88105247207446, 69.3720451183795], [-134.88105751273758, 69.37204539749249], [-134.88106250735564, 69.37204576539241], [-134.88106744335704, 69.3720462211533], [-134.88107230831815, 69.37204676362802], [-134.88107708999408, 69.37204739145115], [-134.8810817763493, 69.37204810304249], [-134.88108635558868, 69.37204889661099], [-134.88109081618626, 69.37204977015926], [-134.8810951469148, 69.37205072148862], [-134.8810993368741, 69.3720517482046], [-134.8811033755179, 69.37205284772298], [-134.88110725268118, 69.37205401727628], [-134.88111095860523, 69.37205525392079], [-134.88111448396222, 69.3720565545439], [-134.881117819879, 69.37205791587203], [-134.88112095795915, 69.37205933447872], [-134.88112389030405, 69.37206080679337], [-134.881126609533, 69.37206232911018], [-134.88112910880184, 69.37206389759754], [-134.8811303026248, 69.37206469289734], [-134.88128231469463, 69.37217241135596], [-134.8812833837566, 69.3721732185758], [-134.88128540687944, 69.37217485073715], [-134.8812871976462, 69.37217651630644], [-134.88128875163846, 69.37217821117427], [-134.88129006502217, 69.37217993115905], [-134.8812911345568, 69.37218167201704], [-134.88129195760345, 69.3721834294532], [-134.88129246968032, 69.37218500676767], [-134.8815306787823, 69.3721711755373], [-134.8815331085607, 69.37217105559736], [-134.88153798169307, 69.372170857166], [-134.88154287629303, 69.37217074181426], [-134.88154778097467, 69.3721707098105], [-134.88155268432814, 69.37217076122923], [-134.88155757494647, 69.37217089595073], [-134.88156244145276, 69.37217111366166], [-134.8815672725261, 69.37217141385557], [-134.88157205692792, 69.37217179583408], [-134.88157678352826, 69.37217225870863], [-134.88158144133163, 69.37217280140241], [-134.88158601950246, 69.37217342265293], [-134.8815905073907, 69.37217412101505], [-134.881594894556, 69.37217489486407], [-134.8815991707923, 69.37217574239979], [-134.8816033261522, 69.37217666165068], [-134.88160735096898, 69.37217765047825], [-134.8816112358794, 69.37217870658213], [-134.88161497184606, 69.37217982750552], [-134.88161855017802, 69.37218101064083], [-134.8816219625509, 69.37218225323574], [-134.88162520102648, 69.37218355239955], [-134.88162677582247, 69.37218421575393], [-134.88182975791014, 69.37227403272914], [-134.88183122523367, 69.37227471478079], [-134.88183406590656, 69.37227610279382], [-134.88183671550217, 69.37227753701802], [-134.88183916798442, 69.37227901418609], [-134.88184141776617, 69.37228053093284], [-134.8818434597219, 69.37228208380282], [-134.88184528919976, 69.37228366925838], [-134.88184690203187, 69.37228528368763], [-134.88184829454394, 69.37228692341269], [-134.8818494635635, 69.37228858469797], [-134.88184999183525, 69.37228942026036], [-134.88190036969183, 69.37237913324248], [-134.8819007978943, 69.37238000918254], [-134.88190153069363, 69.37238176746695], [-134.88190201553346, 69.37238353639285], [-134.88190225122298, 69.37238531161573], [-134.8819022371833, 69.37238708877574], [-134.88190197344886, 69.37238886350814], [-134.88190146066725, 69.37239063145427], [-134.88190070009787, 69.37239238827198], [-134.8818996936086, 69.37239412964661], [-134.88189844367128, 69.37239585130138], [-134.88189695335566, 69.3723975490079], [-134.88189522632194, 69.37239921859658], [-134.88189326681166, 69.37240085596696], [-134.88189107963726, 69.37240245709766], [-134.88188867017035, 69.37240401805634], [-134.88188604432858, 69.37240553500928], [-134.881883208561, 69.37240700423085], [-134.8818801698321, 69.37240842211264], [-134.8818786006295, 69.37240911777518], [-134.88162366653728, 69.3725165586076], [-134.88162200176666, 69.37251722589933], [-134.8816185805207, 69.37251853058791], [-134.88161498017791, 69.37251977392175], [-134.88161120957787, 69.37252095284825], [-134.8816072779781, 69.37252206447288], [-134.88160319503174, 69.37252310606631], [-134.88159897076312, 69.37252407507124], [-134.8815946155439, 69.37252496910853], [-134.88159014006715, 69.37252578598307], [-134.88158555532087, 69.37252652368936], [-134.88158323702152, 69.37252687251168], [-134.8813286944937, 69.37256257021207]], [[-134.8811226844368, 69.37225121874953], [-134.8810890988036, 69.37226006432532], [-134.881089, 69.372278], [-134.88110733260183, 69.37227801255405], [-134.8811226844368, 69.37225121874953]]]}}]}

    
    
    var EC_Station = {"type": "FeatureCollection", "features": [{"id": "0", "type": "Feature", "properties": {"site_name": "FishIsland", "altitude": 2.0, "latitude": 69.372278, "longitude": -134.881089, "canopy_height": 0.08, "zm": 2.87, "bearing": 35.0, "time_zone": "Etc/GMT+7", "start_year": 2017.0, "basemap": "N/A", "basemap_class": "N/A"}, "geometry": {"type": "Point", "coordinates": [-134.881089, 69.372278]}}]}

    map.on('load', () => {
        // Add a data sources containing GeoJSON data.

        // Add a data source containing GeoJSON data.
        map.addSource('Site_Name', {
            'type': 'geojson',
            'data': EC_Station
        });


        // Source_Template_Start
        map.addSource('Climatology', {
            'type': 'geojson',
            'data': Climatology
        });
        

    // Source_Template_End

        // Style_Template_Start
        map.addLayer({
            'id': 'Climatology',
            'type': 'fill',
            'source': 'Climatology',
            'layout': {
                'visibility':'visible'
            },
            'paint': {
                'fill-color': '#f76605',
                'fill-opacity': 0.15
                }
            });
        // Add a black outline around the polygon.
        map.addLayer({
            'id': 'Climatology_outline',
            'type': 'line',
            'source': 'Climatology',
            'layout': {
                'visibility':'visible'
            },
            'paint': {
                'line-color': '#000',
                'line-width': 3
                }
            });
        

    // Style_Template_End

        
        map.addLayer({'id': 'Site_Name',
                'type': 'circle',
                'source': 'Site_Name',
                'filter': ['==', '$type', 'Point'],
                'layout': {
                // Make the layer visible by default.
                'visibility': 'visible'
                },
                'paint': {
                    'circle-radius': 10,
                    'circle-color': '#9803fc',
                    "circle-stroke-width": 1,
                    "circle-stroke-color": 'black'
                    },
                });

    });


    
    
    map.on('idle', () => {
        // Set up the corresponding toggle button for each layer.
        for (const id of FFP_Contour_Intervals) {
        // Skip layers that already have a button set up.
            if (document.getElementById(id) || id == 'Site_Name') {
            continue;
            }
                // Create a link.
                const link = document.createElement('a');
                const initial_visibility = map.getLayoutProperty(
                        id,
                        'visibility'
                        );
                if (initial_visibility=='visible'){
                    link.className = 'active';
                }
                else{
                    link.className = '';
                };
                link.id = id;
                link.href = '#';
                link.textContent = id;
                // Show or hide layer when the toggle is clicked.
                link.onclick = function (e) {
                    const clickedLayer = this.textContent;
                    e.preventDefault();
                    e.stopPropagation();    
                    const visibility = map.getLayoutProperty(
                        clickedLayer,
                        'visibility'
                        );
                
                    // Toggle layer visibility by changing the layout object's visibility property.
                    if (visibility === 'visible') {
                        map.setLayoutProperty(clickedLayer, 'visibility', 'none');
                        // if (clickedLayer === 'BBS'){
                        map.setLayoutProperty(clickedLayer+'_outline', 'visibility', 'none');
                        // };
                        this.className = '';
                        } 
                    else {
                        map.setLayoutProperty(clickedLayer,'visibility','visible');
                        map.setLayoutProperty(clickedLayer+'_outline', 'visibility', 'visible');
                        this.className = 'active';
                    }
                };

            const layers = document.getElementById('layer_menu');
            layers.appendChild(link);
            };
        }  
    );

    map.on('click', FFP_Contour_Intervals, (e) => {
        new mapboxgl.Popup()
            .setLngLat(e.lngLat)
            .setHTML(e.features[0].properties.info)
            .addTo(map);
        });

        
    let bbox = turf.extent(EC_Station);
    
    // fit zom to the bounding box of whichever layers are loaded
    function fit() {
        map.fitBounds(bbox, {maxZoom: 15});
        };

    fit();

    map.addControl(new mapboxgl.ScaleControl({position: 'bottom-right'}));
    
    // Call fit when clicking the zoomto button
    document.getElementById('zoomto').addEventListener('click', () => {
        fit()
    });
</script>

</body>
</html>